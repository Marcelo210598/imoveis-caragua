# Snapshot - 2026-02-04

## O que foi feito hoje

### Sprint 3 - Favoritos (concluido)
- Criado /app/favoritos/page.tsx com grid de imoveis salvos, loading state e empty state
- Adicionado link "Favoritos" no Header navLinks

### Sprint 4 - Upload e Criacao de Imoveis (concluido)
- lib/validations.ts com schema Zod 4 para criacao de imovel
- app/api/upload/route.ts - upload de imagens via Vercel Blob (max 5MB, JPG/PNG/WebP)
- POST handler em app/api/properties/route.ts com limite de 5 imoveis por usuario
- components/property/ImageUploader.tsx com drag-and-drop, preview, reordenacao
- components/property/PropertyForm.tsx - formulario multi-step (4 etapas)
- app/imoveis/novo/page.tsx - pagina protegida
- Filtro venda/aluguel adicionado no FilterSidebar.tsx
- Botao "Anunciar" no Header (desktop e mobile)

### Sprint 5 - Dashboard, Contato, Dark Mode e Responsividade (concluido)
- components/contact/ContactButton.tsx - WhatsApp para imoveis de usuarios, link pro portal para scraped
- components/contact/OwnerInfo.tsx - card do proprietario
- app/meus-imoveis/page.tsx - dashboard com listar, ativar/desativar, remover
- PUT/DELETE handlers em app/api/property/[id]/route.ts
- app/perfil/page.tsx e app/api/user/profile/route.ts
- Dark mode com ThemeProvider, ThemeToggle, classe 'dark' no Tailwind
- Script inline no head para evitar flash de tema
- Responsividade mobile melhorada (homepage, city cards, hero, stats)
- Dark classes em: Header, Footer, PropertyCard, FilterSidebar, SearchBar, pagina de detalhe, homepage

### Extras
- Logo SVG criado (public/logo.svg) - circulo azul com casa, onda, sol e palmeira
- Favicon SVG (app/icon.svg) - versao simplificada para aba do navegador
- Vercel Blob Storage configurado e conectado ao projeto

## Decisoes tecnicas importantes
- Zod 4 usa `message` em vez de `required_error` nos enums (diferenca da v3)
- Dark mode via `darkMode: 'class'` no Tailwind com ThemeProvider Context
- Favicon como SVG nativo do App Router (app/icon.svg) em vez de .ico
- Vercel Blob para storage de imagens (conectado via Vercel Storage dashboard)
- Anti-spam: limite de 5 imoveis ativos por usuario

## Problemas encontrados e solucoes
- **Zod 4 API**: `required_error` nao existe em z.enum() no Zod 4. Solucao: usar `message` no lugar
- **Vercel Blob**: usuario ja tinha store conectado mas nao sabia. Confirmado via dashboard

## Configuracoes adicionadas
- BLOB_READ_WRITE_TOKEN (via Vercel Storage dashboard)
- darkMode: 'class' no tailwind.config.ts

## Estado atual do projeto
- v1.0 - Marketplace funcional com 5 sprints completos
- Auth (phone OTP), favoritos, upload de fotos, criacao de imoveis, dashboard, contato, dark mode
- Deploy no Vercel funcionando

## Proxima sessao (To-do)
- Sprint 6 - Polish & Deploy:
  - Configurar env vars de producao (TWILIO, NEXTAUTH)
  - SEO metadata dinamica por pagina de imovel
  - Rate limit de OTP
  - Testar fluxo completo em producao
  - Melhorar fallback de imagens quebradas
  - ISR para paginas de imoveis

## Observacoes importantes
- Todas as features dos Sprints 1-5 estao implementadas e commitadas
- O site suporta imoveis scraped (ZAP/VivaReal) coexistindo com imoveis de usuarios
- Vercel Blob Storage ja conectado ao projeto (imoveis-caragua-blob, regiao GRU1)
